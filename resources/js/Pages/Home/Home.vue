<template>

    <frontend-layout>

        <MainTopHeaderBlock></MainTopHeaderBlock>

<!--        rate_decimal_numbers::{{ rate_decimal_numbers}}-->

<!--        <TopCmsBlocks ></TopCmsBlocks>-->



        <section id="designIdeas">
            <div class="container">
                <div class="bg-holder  z-index--1" style="background-image:url(/assets/img/gallery/design-concept-bg.png);background-position:center;background-size:cover;">
                </div>
                <!--/.bg-holder-->

                <div class="row">
                    <div class="col-md-9 col-lg-7 p-7">
                        <h5>DESIGN IDEAS</h5>
                        <h5 class="fw-bold fs-3 fs-xxl-7"> Stunning web design ideas for your studio website</h5>
                        <p class="pe-xl-9">Creating a website for your business can be a big challenge; it’s a lot of pressure to design the best reflection of your company, digitally. </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 px-7">
                        <div class="d-flex align-items-start"><img class="me-4" src="/assets/img/gallery/icon-1.png" alt="..." />
                            <div class="flex-1">
                                <h5>Developing websites</h5>
                                <p>Web development is the work involved in developing a Web site for the Internet or an intranet.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 px-7 py-3">
                        <div class="d-flex align-items-start"><img class="me-4" src="/assets/img/gallery/icon-2.png" alt="..." />
                            <div class="flex-1">
                                <h5>Design concept</h5>
                                <p>The principles of design are the rules a designer must follow to create an effective and attractive composition.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 px-7 py-3">
                        <div class="d-flex align-items-start"><img class="me-4" src="/assets/img/gallery/icon-2.png" alt="..." />
                            <div class="flex-1">
                                <h5>Effective and evolving design</h5>
                                <p>The Impression your website makes directly reflects the competency of your business.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 px-7 py-3">
                        <div class="d-flex align-items-start"><img class="me-4" src="/assets/img/gallery/icon-1.png" alt="..." />
                            <div class="flex-1">
                                <h5>Appealing to your audience</h5>
                                <p>The most important part of building a brand and website is keeping your target audience in mind. </p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row px-lg-7">
                    <div class="col-12 py-3">
                        <h5 class="fw-bold fs-3 fs-lg-4 lh-sm mb-5"> 3 Basic Principles Of Design</h5>
                    </div>
                    <div class="col-md-4 mb-5 mb-md-0">
                        <div class="card card-span shadow h-100 pt-4">
                            <div class="card-body">
                                <div class="px-2">
                                    <h3>Typography</h3>
                                    <p>typography design is the art of arranging a message in a readable and aesthetically pleasing composition.</p>
                                </div>
                            </div>
                            <div class="card-footer bg-white py-3"><a href="#!">Experienced team</a></div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-5 mb-md-0">
                        <div class="card card-span shadow h-100 pt-4">
                            <div class="card-body">
                                <div class="px-2">
                                    <h3>Hierarchy </h3>
                                    <p>Hierarchy is a visual design principle which designers use to show the importance of each page/screen's contents by manipulating these characteristics: Size – Users notice larger elements more easily. Color – Bright colors typically attract more attention than muted ones.</p>
                                </div>
                            </div>
                            <div class="card-footer bg-white py-3"><a href="#!">Experienced team </a></div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-5 mb-md-0">
                        <div class="card card-span shadow h-100 pt-4">
                            <div class="card-body">
                                <div class="px-2">
                                    <h3>Colors</h3>
                                    <p>Color is used to attract attention, group related elements, convey meaning, and generally enhance the aesthetics of your site.</p>
                                </div>
                            </div>
                            <div class="card-footer bg-white py-3"><a href="#!">Experienced team </a></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>


<!--        <TopCurrenciesBlock></TopCurrenciesBlock>-->
<!--        :rate_decimal_numbers="rate_decimal_numbers"-->


        <section class="py-0">
            <div class="bg-holder  rounded-3" style="background-image:url(/assets/img/gallery/review-bg.png);background-position:center;background-size:contain;">
            </div>
            <!--/.bg-holder-->

            <div class="container">
                <div class="row flex-center">
                    <div class="col-xl-8">
                        <div class="mb-7">
                            <h1 class="fs-4">“Every single person comes away and says - wow that's a really slick experience, that was so easy to use. I feel so much less stressed as I now know we’re doing everything by the book.”</h1>
                            <div class="d-flex align-items-md-center mt-5"><img class="img-fluid me-4 me-md-3 me-lg-4" src="/assets/img/gallery/user-1.png" width="100" alt="" />
                                <div class="w-lg-100 my-2">
                                    <h5 class="mb-0 fw-bold">Andry Ford</h5>
                                    <p class="fw-normal mb-0">CEO at Whatever</p>
                                </div>
                            </div>
                        </div>
                        <div class="mb-7">
                            <h1 class="fs-4">I feel so much less stressed <i class="fa fa-heart text-danger fs-2"></i> as I now know we’re doing everything by the book.”</h1>
                            <div class="d-flex align-items-md-center mt-5"><img class="img-fluid me-4 me-md-3 me-lg-4" src="/assets/img/gallery/user-2.png" width="100" alt="" />
                                <div class="w-lg-100 my-2">
                                    <h5 class="mb-0 fw-bold">Andry Ford</h5>
                                    <p class="fw-normal mb-0">CEO at Whatever</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <MainContactUsBlock></MainContactUsBlock>

        <!-- ============================================-->
        <!-- <section> begin ============================-->
        <section class="py-0 pt-7 bg-1000" id="help">

            <div class="container">
                <div class="row">
                    <div class="col-12 col-md-8 col-xl-4"><img src="/assets/img/gallery/footer-logo.png" height="24" alt="..." />
                        <p class="text-light mt-4">ThemeWagon offers an wide array of category-oriented Free and Premium Responsive Bootstrap HTML Templates and WordPress Themes that covers all kinds of templates or themes a developer may need!</p>
                    </div>
                    <div class="col-6 col-md-4 col-xl-2 mb-3">
                        <h5 class="lh-lg fw-bold text-white">COMPANY</h5>
                        <ul class="list-unstyled mb-md-4 mb-lg-0">
                            <li class="lh-lg"><a class="text-200 text-decoration-none" href="#!">About Us</a></li>
                            <li class="lh-lg"><a class="text-200 text-decoration-none" href="#!">Team</a></li>
                            <li class="lh-lg"><a class="text-200 text-decoration-none" href="#!">Careers</a></li>
                            <li class="lh-lg"><a class="text-200 text-decoration-none" href="#!">blog</a></li>
                        </ul>
                    </div>
                    <div class="col-6 col-md-4 col-xl-2 mb-3">
                        <h5 class="lh-lg fw-bold text-white">Resources</h5>
                        <ul class="list-unstyled mb-md-4 mb-lg-0">
                            <li class="lh-lg"><a class="text-200 text-decoration-none" href="#!">Terms</a></li>
                            <li class="lh-lg"><a class="text-200 text-decoration-none" href="#!">Help</a></li>
                            <li class="lh-lg"><a class="text-200 text-decoration-none" href="#!">Privacy Policy</a></li>
                        </ul>
                    </div>
                    <div class="col-6 col-md-4 col-xl-2 mb-3">
                        <h5 class="lh-lg fw-bold text-white">Blog</h5>
                        <ul class="list-unstyled mb-md-4 mb-lg-0">
                            <li class="lh-lg"><a class="text-200 text-decoration-none" href="#!">Lifestyle</a></li>
                            <li class="lh-lg"><a class="text-200 text-decoration-none" href="#!">Article</a></li>
                            <li class="lh-lg"><a class="text-200 text-decoration-none" href="#!">Tech</a></li>
                        </ul>
                    </div>
                    <div class="col-6 col-md-4 col-xl-2 mb-3">
                        <h5 class="lh-lg fw-bold text-white">CONTACT</h5>
                        <ul class="list-unstyled mb-md-4 mb-lg-0">
                            <li class="lh-lg"><a class="text-200 text-decoration-none" href="#!">Help &amp; Support</a></li>
                            <li class="lh-lg"><a class="text-200 text-decoration-none" href="#!">Partner with us </a></li>
                            <li class="lh-lg"><a class="text-200 text-decoration-none" href="#!">Ride with us</a></li>
                        </ul>
                    </div>
                </div>
                <hr class="border border-800" />
                <div class="row flex-center pb-3">
                    <div class="col-md-6 order-0">
                        <p class="text-200 text-center text-md-start">All rights Reserved &copy; Your Company, 2021</p>
                    </div>
                    <div class="col-md-6 order-1">
                        <p class="text-200 text-center text-md-end"> Made with&nbsp;
                            <svg class="bi bi-suit-heart-fill" xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="#0E6FFF" viewBox="0 0 16 16">
                                <path d="M4 1c2.21 0 4 1.755 4 3.92C8 2.755 9.79 1 12 1s4 1.755 4 3.92c0 3.263-3.234 4.414-7.608 9.608a.513.513 0 0 1-.784 0C3.234 9.334 0 8.183 0 4.92 0 2.755 1.79 1 4 1z"></path>
                            </svg>&nbsp;by&nbsp;<a class="text-200 fw-bold" href="https://themewagon.com/" target="_blank">ThemeWagon </a>
                        </p>
                    </div>
                </div>
            </div>
            <!-- end of .container-->

        </section>
        <!-- <section> close ============================-->
        <!-- ============================================-->

        <!-- Content BLOCK END -->

        </frontend-layout>


</template>

<script>
import FrontendLayout from '@/Layouts/FrontendLayout'
import axios from 'axios' // eslint-disable-line
import {$vfm, VueFinalModal, ModalsContainer} from 'vue-final-modal'
import Multiselect from '@vueform/multiselect'
import TopCmsBlocks from '@/Pages/Home/TopCmsBlocks.vue'
import TopCurrenciesBlock from '@/Pages/Home/TopCurrenciesBlock.vue'
import MainTopHeaderBlock from '@/Pages/Home/MainTopHeaderBlock.vue'
import MainContactUsBlock from '@/Pages/Home/MainContactUsBlock.vue'

import {
    getHeaderIcon,
    pluralize,
    pluralize3,
    momentDatetime,
    getErrorMessage,
    getDictionaryLabel,
} from '@/commonFuncs'
import {ref, computed, onMounted} from 'vue'

import {
    settingsJsMomentDatetimeFormat, settingsCurrencyActiveLabels, settingsCurrencyIsTopLabels
} from '@/app.settings.js'

// file:///mnt/_work_sdb8/wwwroot/lar/BiCurrencies/resources/js/Components/ListingHeader.vue
// import app from '@/main.js'

export default {
    name: 'HomePage',
    components: {
        FrontendLayout,
        // ListingHeader,
        // ListingPagination,
        Multiselect,
        VueFinalModal,
        TopCmsBlocks,
        TopCurrenciesBlock,
        MainTopHeaderBlock,
        MainContactUsBlock,
        ModalsContainer
    },
    setup(props) {
        console.log('HOME props::')
        console.log(props)


        // const rate_decimal_numbers = ref(props.rate_decimal_numbers)
        const rate_decimal_numbers = ref(4)
        const activeCurrencyRows = ref([])
        const paginationLinks = ref([])
        const active_currencies_total_count = ref(0)
        const active_currencies_per_page = ref(20)
        const show_only_top_currencies =  ref(false)

        const show_filters_modal = ref(false)
        const order_by = ref('name')
        const order_direction = ref('asc')
        const filter_name = ref('')

        const orderBySelectionArray = ref([
            {id: 'id', name: 'Name'},
            {id: 'char_code', name: 'Char code'},
            {id: 'is_top', name: 'Is top'},
            {id: 'active', name: 'Active'},
            {id: 'ordering', name: 'Ordering'},
            {id: 'created_at', name: 'Created'}
        ])

        const orderDirectionSelectionArray = ref([
            {id: 'asc', name: 'Ascending'},
            {id: 'desc', name: 'Descending'},
        ])


        let currencies_per_page = ref(2)
        const current_page = ref(1)
        let currencies_filtered_count = ref(0)
        let currencyRows = ref([])

        let is_page_loaded = ref(true)

        function currenciesFilterApplied() { // TODO
            loadActiveCurrencies()
        }

        function loadActiveCurrencies() {
            console.log('-2 loadActiveCurrencies ::')
            // Route::post('current_rates/filter', [FrontendCurrencyController::class, 'filter'])->name('frontend.currencies_rates.filter');

            let filters = {page: current_page.value, show_only_top_currencies: show_only_top_currencies.value}
            axios.post(route('frontend.currencies_rates.filter'), filters)
                .then(({data}) => {
                    console.log('loadActiveCurrencies data::')
                    console.log(data)
                    activeCurrencyRows.value = data.data
                    paginationLinks.value = data.meta.links
                    active_currencies_total_count.value = data.meta.total
                    active_currencies_per_page.value = data.meta.per_page
                })
                .catch(error => {
                    console.error(error)
                    // this.showPopupMessage('Currencies Editor', error.response.data.message, 'warn')
                })
        } // loadActiveCurrencies() {

        function showFiltersModal() {
            console.log('showFiltersModal::')
            show_filters_modal.value = true
        }

        function hideFiltersModal() {
            console.log('hideFiltersModal::')
            show_filters_modal.value = false
        }

        function clearFilters() {
            filter_name.value = ''
            order_by.value = ''
            order_direction.value = ''
        }

        function applyFilters() {
            console.log('applyFilters::')
            current_page.value = 1
            loadActiveCurrencies(true)

            show_filters_modal.value = false
            let filters_count_text = getFiltersCountText()
            let filters = {filter_name: filter_name}
            window.emitter.emit('listingFilterModifiedEvent', {
                parentComponentKey: 'currency',
                filters: filters,
                filters_count_text: filters_count_text
            })
        }

        function getFiltersCountText() {
            let ret = 0
            if (show_filters_modal.value) return ''
            if (filter_name.value != '') {
                ret++
            }
            // console.log('ret::')
            // console.log(ret)
            if (!ret) return ''
            return (ret > 0 ? ret + ' ' : '') + pluralize3(ret, ' no filters set', ' filter is set', ' filters are set')
        } // getFiltersCountText


        function currencyRowsPaginationPageClicked(page) {
            current_page.value = page
            loadActiveCurrencies()
        }


        const currentRatesListOnMounted = async () => {
            window.emitter.on('listingHeaderRightButtonClickedEvent', params => {
                console.log('TARGET listingHeaderRightButtonClickedEvent params::')
                console.log(params)
                if (params.parentComponentKey === 'currency') {
                    console.log('!!!!!loadActiveCurrencies::')
                    loadActiveCurrencies()
                }
            })
            window.emitter.on('paginationPageChangedEvent', params => {
                console.log('TARGET paginationPageChangedEvent params::')
                console.log(params)
                if (params.parentComponentKey === 'currency') {
                    currencyRowsPaginationPageClicked(params.page)
                }
            })
            window.emitter.on('showFiltersModalEvent', params => {
                console.log('TARGET showFiltersModalEvent params::')
                console.log(params)
                if (params.parentComponentKey === 'currency') {
                    showFiltersModal()
                }
            })
            loadActiveCurrencies()
            // showFiltersModal()// DEBUGGING
        } // const currentRatesListOnMounted = async () => {

        onMounted(currentRatesListOnMounted)

        return { // setup return
            // Listing Page state
            current_page,
            activeCurrencyRows,
            paginationLinks,
            active_currencies_total_count,
            active_currencies_per_page,

            // Page actions
            loadActiveCurrencies,
            currencyRowsPaginationPageClicked,
            currenciesFilterApplied,

            // Settings vars
            settingsJsMomentDatetimeFormat,
            settingsCurrencyActiveLabels,
            settingsCurrencyIsTopLabels,
            rate_decimal_numbers,

            // Listing filtering
            show_filters_modal,
            filter_name,
            order_by,
            order_direction,
            is_page_loaded,
            orderBySelectionArray,
            orderDirectionSelectionArray,
            clearFilters,
            showFiltersModal,
            hideFiltersModal,
            applyFilters,

            // Common methods
            pluralize,
            pluralize3,
            momentDatetime,
            getErrorMessage,
            getHeaderIcon,
            getDictionaryLabel,
        }
    }, // setup() {

}
</script>
